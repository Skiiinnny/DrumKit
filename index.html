<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- --CSS-- -->

    <link rel="stylesheet" href="CSS/style.css" />

    <!-- --BOOTSTRAP CSS-- -->

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />

    <title>Bateria</title>
  </head>
  <body>
    <div class="">
      <div
        class="
          d-flex
          justify-content-center
          align-content-center
          position-absolute
          top-50
          start-50
          translate-middle
        "
      >
        <div data-key="65" class=" nota">
          <kbd>A</kbd>
          <span class="sonido">CAJA</span>
        </div>

        <div data-key="83" class="nota">
          <kbd>S</kbd>
          <span class="sonido">HITHAT</span>
        </div>
        <div data-key="68" class="nota">
          <kbd>D</kbd>
          <span class="sonido">BOMBO</span>
        </div>
        <div data-key="70" class="nota">
          <kbd>F</kbd>
          <span class="sonido">OPEN HAT</span>
        </div>
        <div data-key="71" class="nota">
          <kbd>G</kbd>
          <span class="sonido">BREAK 1</span>
        </div>
        <div data-key="72" class="nota">
          <kbd>H</kbd>
          <span class="sonido">BREAK 2</span>
        </div>
        <div data-key="74" class="nota">
          <kbd>J</kbd>
          <span class="sonido">CRASH</span>
        </div>
        <div data-key="75" class="nota">
          <kbd>K</kbd>
          <span class="sonido">PANDERO</span>
        </div>
        <div data-key="76" class="nota">
          <kbd>L</kbd>
          <span class="sonido">CAJA 2</span>
        </div>

        <!-- --AUDIOS-- -->
        <audio data-key="65" src="WAVs/CAJA.wav"></audio>
        <audio data-key="83" src="WAVs/HI-HAT.wav"></audio>
        <audio data-key="68" src="WAVs/BOMBO.wav"></audio>
        <audio data-key="70" src="WAVs/OPEN HAT.wav"></audio>
        <audio data-key="71" src="WAVs/BREAK 1.wav"></audio>
        <audio data-key="72" src="WAVs/BREAK 2.wav"></audio>
        <audio data-key="74" src="WAVs/CRASH.wav"></audio>
        <audio data-key="75" src="WAVs/TAMBOURINE.wav"></audio>
        <audio data-key="76" src="WAVs/CAJA RF.wav"></audio>
      </div>
    </div>

    <!-- --JAVASCRIPT-- -->
    <script>
      function playSound(event) {
        const audio = document.querySelector(
          `audio[data-key="${event.keyCode}"]`
        );
        const key = document.querySelector(`.key[data-key="${event.keyCode}"]`);
        if (!audio) return; //Evita que el programa se salga de sus funciones
        audio.currentTime = 0; //EL sonido se ejecuta cada vez que se presiona la tecla correspondiente, sin esperar a que termine el sonido anterior
        audio.play();
        key.classList.add('playing');
      }

      function removeTransition(event) {
        if (event.propertyName !== 'transform') return ; //Si no hay transicion, lo salta
        this.classList.remove('playing');
      }
      const keys = document.querySelectorAll('.key');
      keys.forEach(key =>
        key.addEventListener('transitionend', removeTransition)
      );
      window.addEventListener('keydown', playSound);
    </script>
    <!-- --BOOTSTRAP JS-- -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
